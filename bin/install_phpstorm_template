#!/bin/bash

TEMPLATE_FILE="./docs/resources/converter_bundle_templates.xml"

if [ ! -f "$TEMPLATE_FILE" ]; then
  echo "‚ùå Template-Datei '$TEMPLATE_FILE' nicht gefunden!"
  exit 1
fi

# JetBrains Config-Verzeichnis
CONFIG_BASE="$HOME/.config/JetBrains"

# Suche nach PhpStorm-Verzeichnissen
PHPSTORM_DIR=$(find "$CONFIG_BASE" -maxdepth 1 -type d -name "PhpStorm*" | sort -V | tail -n1)

if [ -z "$PHPSTORM_DIR" ]; then
  echo "‚ùå Kein PhpStorm-Konfigurationsordner gefunden unter $CONFIG_BASE"
  exit 1
fi

TEMPLATE_TARGET="$PHPSTORM_DIR/templates"

echo "üìÅ Gefundener PhpStorm-Ordner: $PHPSTORM_DIR"
echo "üì¶ Installiere Template nach: $TEMPLATE_TARGET"

mkdir -p "$TEMPLATE_TARGET"
cp "$TEMPLATE_FILE" "$TEMPLATE_TARGET/"

echo "‚úÖ Template installiert!"
echo "üîÑ Starte PhpStorm neu, um die Templates zu laden."
